import{_ as x}from"./Typo.BkCsQLVI.js";import{c as b,a as d,_ as w,F as y}from"./index.esm.DoZA57yg.js";import{h as k,o as g,F as S,w as a,a as r,b as o,d as p,G as C,I as N,a8 as f,$ as F,J as I,p as T,f as V,_ as $}from"./entry.DwqXwOyw.js";import{_ as B}from"./CustomLink.SyepRw-K.js";import{u as J,_ as O}from"./useCustomFetch.CglE_PrC.js";import"./_commonjsHelpers.Cpj98o6Y.js";const M=async(t,c)=>await J("user/login","POST",{body:{email:t,password:c}}),P=t=>(T("data-v-67db6e7c"),t=t(),V(),t),q={class:"Form"},L={class:"Form-content"},U={class:"link flex justify-between mt-10 h-fit"},j=P(()=>r("span",{class:"h-full w-0.5 bg-white"},null,-1)),z=k({__name:"index",setup(t){const c=b({email:d().email().required(),password:d().required()}),h=async(i,{resetForm:u})=>{var s;const{error:_,data:e}=await M(i.email,i.password);if(!_.value&&(e!=null&&e.value)){u(),N("Connexion réussie",[`Content de vous revoir ${(s=e.value)==null?void 0:s.username}`],"success");const{token:l,...n}=e.value,m=f("user"),v=f("token");m.value=JSON.parse(JSON.stringify(n)),v.value=JSON.parse(JSON.stringify(l)),F("/")}};return(i,u)=>{const _=x,e=w,s=I,l=y,n=B,m=O;return g(),S(m,{name:"auth"},{default:a(()=>[r("div",q,[r("div",L,[o(_,{tag:"h2",format:"bold",class:"text-center mb-6"},{default:a(()=>[p(" Bienvenue sur l'application de l'AS Pertuis ")]),_:1}),o(l,{"validation-schema":C(c),onSubmit:h},{default:a(()=>[o(e,{name:"email",type:"email",label:"Mail",placeholder:"Votre mail"}),o(e,{name:"password",type:"password",label:"Mot de passe",placeholder:"Votre mot de passe"}),o(s,{icon:"i-heroicons-check",size:"sm",color:"primary",type:"submit",class:"mt-6",variant:"solid",block:"",label:"Se connecter",trailing:!1})]),_:1},8,["validation-schema"])])]),r("div",U,[o(n,{href:"/auth/register",variant:"white",typo:{format:"normal",tag:"p"}},{default:a(()=>[p(" Pas encore inscrit ? ")]),_:1}),j,o(n,{href:"",variant:"white",typo:{format:"normal",tag:"p"}},{default:a(()=>[p(" Mot de passe oublié ? ")]),_:1})])]),_:1})}}}),Q=$(z,[["__scopeId","data-v-67db6e7c"]]);export{Q as default};
